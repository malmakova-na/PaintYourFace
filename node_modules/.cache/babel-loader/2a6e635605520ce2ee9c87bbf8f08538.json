{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Arrow = void 0;\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Line_1 = require(\"./Line\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Arrow = function (_super) {\n  __extends(Arrow, _super);\n\n  function Arrow() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Arrow.prototype._sceneFunc = function (ctx) {\n    _super.prototype._sceneFunc.call(this, ctx);\n\n    var PI2 = Math.PI * 2;\n    var points = this.points();\n    var tp = points;\n    var fromTension = this.tension() !== 0 && points.length > 4;\n\n    if (fromTension) {\n      tp = this.getTensionPoints();\n    }\n\n    var n = points.length;\n    var dx, dy;\n\n    if (fromTension) {\n      dx = points[n - 2] - (tp[tp.length - 2] + tp[tp.length - 4]) / 2;\n      dy = points[n - 1] - (tp[tp.length - 1] + tp[tp.length - 3]) / 2;\n    } else {\n      dx = points[n - 2] - points[n - 4];\n      dy = points[n - 1] - points[n - 3];\n    }\n\n    var radians = (Math.atan2(dy, dx) + PI2) % PI2;\n    var length = this.pointerLength();\n    var width = this.pointerWidth();\n    ctx.save();\n    ctx.beginPath();\n    ctx.translate(points[n - 2], points[n - 1]);\n    ctx.rotate(radians);\n    ctx.moveTo(0, 0);\n    ctx.lineTo(-length, width / 2);\n    ctx.lineTo(-length, -width / 2);\n    ctx.closePath();\n    ctx.restore();\n\n    if (this.pointerAtBeginning()) {\n      ctx.save();\n      ctx.translate(points[0], points[1]);\n\n      if (fromTension) {\n        dx = (tp[0] + tp[2]) / 2 - points[0];\n        dy = (tp[1] + tp[3]) / 2 - points[1];\n      } else {\n        dx = points[2] - points[0];\n        dy = points[3] - points[1];\n      }\n\n      ctx.rotate((Math.atan2(-dy, -dx) + PI2) % PI2);\n      ctx.moveTo(0, 0);\n      ctx.lineTo(-length, width / 2);\n      ctx.lineTo(-length, -width / 2);\n      ctx.closePath();\n      ctx.restore();\n    }\n\n    var isDashEnabled = this.dashEnabled();\n\n    if (isDashEnabled) {\n      this.attrs.dashEnabled = false;\n      ctx.setLineDash([]);\n    }\n\n    ctx.fillStrokeShape(this);\n\n    if (isDashEnabled) {\n      this.attrs.dashEnabled = true;\n    }\n  };\n\n  Arrow.prototype.getSelfRect = function () {\n    var lineRect = _super.prototype.getSelfRect.call(this);\n\n    var offset = this.pointerWidth() / 2;\n    return {\n      x: lineRect.x - offset,\n      y: lineRect.y - offset,\n      width: lineRect.width + offset * 2,\n      height: lineRect.height + offset * 2\n    };\n  };\n\n  return Arrow;\n}(Line_1.Line);\n\nexports.Arrow = Arrow;\nArrow.prototype.className = 'Arrow';\n\nGlobal_1._registerNode(Arrow);\n\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerLength', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerWidth', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerAtBeginning', false);\nUtil_1.Collection.mapMethods(Arrow);","map":{"version":3,"sources":["/home/namina/courses/tinkoff/paint-your-face/node_modules/konva/lib/shapes/Arrow.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__","constructor","create","defineProperty","exports","value","Arrow","Util_1","require","Factory_1","Line_1","Validators_1","Global_1","_super","apply","arguments","_sceneFunc","ctx","PI2","Math","PI","points","tp","fromTension","tension","length","getTensionPoints","n","dx","dy","radians","atan2","pointerLength","width","pointerWidth","save","beginPath","translate","rotate","moveTo","lineTo","closePath","restore","pointerAtBeginning","isDashEnabled","dashEnabled","attrs","setLineDash","fillStrokeShape","getSelfRect","lineRect","offset","x","y","height","Line","className","_registerNode","Factory","addGetterSetter","getNumberValidator","Collection","mapMethods"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Arrow = void 0;\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Line_1 = require(\"./Line\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Arrow = (function (_super) {\n    __extends(Arrow, _super);\n    function Arrow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Arrow.prototype._sceneFunc = function (ctx) {\n        _super.prototype._sceneFunc.call(this, ctx);\n        var PI2 = Math.PI * 2;\n        var points = this.points();\n        var tp = points;\n        var fromTension = this.tension() !== 0 && points.length > 4;\n        if (fromTension) {\n            tp = this.getTensionPoints();\n        }\n        var n = points.length;\n        var dx, dy;\n        if (fromTension) {\n            dx = points[n - 2] - (tp[tp.length - 2] + tp[tp.length - 4]) / 2;\n            dy = points[n - 1] - (tp[tp.length - 1] + tp[tp.length - 3]) / 2;\n        }\n        else {\n            dx = points[n - 2] - points[n - 4];\n            dy = points[n - 1] - points[n - 3];\n        }\n        var radians = (Math.atan2(dy, dx) + PI2) % PI2;\n        var length = this.pointerLength();\n        var width = this.pointerWidth();\n        ctx.save();\n        ctx.beginPath();\n        ctx.translate(points[n - 2], points[n - 1]);\n        ctx.rotate(radians);\n        ctx.moveTo(0, 0);\n        ctx.lineTo(-length, width / 2);\n        ctx.lineTo(-length, -width / 2);\n        ctx.closePath();\n        ctx.restore();\n        if (this.pointerAtBeginning()) {\n            ctx.save();\n            ctx.translate(points[0], points[1]);\n            if (fromTension) {\n                dx = (tp[0] + tp[2]) / 2 - points[0];\n                dy = (tp[1] + tp[3]) / 2 - points[1];\n            }\n            else {\n                dx = points[2] - points[0];\n                dy = points[3] - points[1];\n            }\n            ctx.rotate((Math.atan2(-dy, -dx) + PI2) % PI2);\n            ctx.moveTo(0, 0);\n            ctx.lineTo(-length, width / 2);\n            ctx.lineTo(-length, -width / 2);\n            ctx.closePath();\n            ctx.restore();\n        }\n        var isDashEnabled = this.dashEnabled();\n        if (isDashEnabled) {\n            this.attrs.dashEnabled = false;\n            ctx.setLineDash([]);\n        }\n        ctx.fillStrokeShape(this);\n        if (isDashEnabled) {\n            this.attrs.dashEnabled = true;\n        }\n    };\n    Arrow.prototype.getSelfRect = function () {\n        var lineRect = _super.prototype.getSelfRect.call(this);\n        var offset = this.pointerWidth() / 2;\n        return {\n            x: lineRect.x - offset,\n            y: lineRect.y - offset,\n            width: lineRect.width + offset * 2,\n            height: lineRect.height + offset * 2\n        };\n    };\n    return Arrow;\n}(Line_1.Line));\nexports.Arrow = Arrow;\nArrow.prototype.className = 'Arrow';\nGlobal_1._registerNode(Arrow);\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerLength', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerWidth', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerAtBeginning', false);\nUtil_1.Collection.mapMethods(Arrow);\n"]},"metadata":{},"sourceType":"script"}